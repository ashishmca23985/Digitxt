<!DOCTYPE html>
<html lang="en">
<!-- Page generated at 2019-10-10 10:07:09 -->

<!-- Mirrored from www.bulksms.com/developer/eapi/submission/send_batch/ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 15 Oct 2019 07:43:21 GMT -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Send_batch - API - BulkSMS.com</title>

    <link rel="stylesheet" href="../../../css/bootstrap-3.1.1.min.css">
    <link rel="stylesheet" href="../../../css/bootstrap-docs.min.css">
    <link rel="stylesheet" href="../../../css/highlightjs-8.4.min.css">
    <link rel="stylesheet" href="../../../css/styles.css">
    <link rel="stylesheet" href="../../../css/font-awesome.min.css">

</head>
<body>
    <div class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand" href="../../../../index.html" target="_blank"><img src="../../../images/bulksms.png"></a>
            </div>
            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li><a style="background: grey; color: white; border: 1px solid grey" href="../../../index.html">Developers</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="container bulksms-content">
        <b><a class="popover-help-link" tabindex="0" role="button" data-toggle="popover" data-trigger="focus" title="Deprecated" data-content="This API is no longer actively developed - however, it is still available for the use of customers with existing integrations.">Deprecated</a> - please use the <a href="../../../json/v1/index.html#tag/Message%2Fpaths%2F~1messages%2Fpost">JSON API</a> instead.</b>

<div class="container">
  <div class="row">
    <div class="col-md-10">
      <h1 id="submissionsend_batch">submission/send_batch</h1>
<p>Allows you to send multiple messages to one or more recipients in a single submission.</p>

<p>Note on HTTP connections: please limit yourself to one concurrent connection, i.e., in your code, send with only one thread/process. If you feel that you have latency problems (if your computer is far away from our server in network terms), you could consider using HTTP KeepAlive.</p>

<p>URL</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>«EAPI URL»/submission/send_batch/1/1.0
</code></pre></div></div>

<p>Example</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>«EAPI URL»/submission/send_batch/1/1.0?username=john&amp;password=abcd1234&amp;batch_data=msisdn,message%0a%22111111111%22,%22Hi+there%22%0a%22333333333%22,%22Hello+again%22
</code></pre></div></div>

<p>This example is so simple that it can be pasted into a browser’s location bar. However, please <a href="../faq/index.html#why-should-i-use-http-post-instead-of-http-get">do not use HTTP GET</a> in production - use only POST. To ensure that you are using POST correctly, please use the <a href="../../code-samples/index.html">Code Samples</a> as a basis. You should also consider using a library to encode the CSV rather than trying to escape it correctly yourself. Although there is no official standard for CSV, most common formats should be supported.</p>

<p>The batch_data CSV field looks like this unencoded:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>msisdn,message
"111111111","Hi there"
"333333333","Hello again"
</code></pre></div></div>

<p><strong>Example which shows how to escape newlines and double quotes</strong> (with a backslash: %5C)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>«EAPI URL»/submission/send_batch/1/1.0?username=john&amp;password=abcd1234&amp;batch_data=msisdn,message%0a%22111111111%22,%22Hi+there%22%0a%22333333333%22,%22Hello+again.+Here+is+some+%5C%22quoted+text%5C%22.%5C%0aThis+text+follows+a+newline%22
</code></pre></div></div>

<h2 id="http-parameters">HTTP parameters</h2>

<p>(Parameter values should be encoded in ISO-8859-1)</p>

<table>
  <thead>
    <tr>
      <th>parameter</th>
      <th style="text-align: center">required</th>
      <th>default</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>username</td>
      <td style="text-align: center">✓</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>password</td>
      <td style="text-align: center">✓</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>batch_data</td>
      <td style="text-align: center">✓</td>
      <td> </td>
      <td>your submission in CSV format (current maximum size: 30,000 messages)</td>
    </tr>
    <tr>
      <td>sender</td>
      <td style="text-align: center"> </td>
      <td> </td>
      <td>sender id / origin address (if alphanumeric, max 11 characters). This facility becomes available after credits have been purchased for the first time. To request a sender id, log into your account, go to User Account and click Change Sender ID. Alphanumeric sender id is a <a href="#route-specific-features">route-specific feature</a>.</td>
    </tr>
    <tr>
      <td>msg_class</td>
      <td style="text-align: center"> </td>
      <td>2</td>
      <td>currently 0 (flash SMS) or 2 (normal SMS), default 2</td>
    </tr>
    <tr>
      <td>dca</td>
      <td style="text-align: center"> </td>
      <td>7bit</td>
      <td>Data Coding Alphabet: 7bit,8bit or 16bit, default 7bit (normal text message). For 8bit (ringtones,logos) or 16bit (Unicode), a message containing only hexadecimal octets, to a maximum of 140 octets (where an octet is e.g. ff), must be submitted (the UDHI is always set for 8-bit messages). 16-bit is a <a href="#route-specific-features">route-specific feature</a>.</td>
    </tr>
    <tr>
      <td>want_report</td>
      <td style="text-align: center"> </td>
      <td>1</td>
      <td>0 or 1, default 1</td>
    </tr>
    <tr>
      <td>routing_group</td>
      <td style="text-align: center"> </td>
      <td> </td>
      <td>(previously known as cost_route, which still works to be backwards compatible) - possible values are 1,2,3 (it is possible but unlikely that these values could change - if they do, you should be contacted first). The current default is 2, but you would be wise to not depend on this remaining so. Routing groups group delivery routes by cost or quality.</td>
    </tr>
    <tr>
      <td>source_id</td>
      <td style="text-align: center"> </td>
      <td> </td>
      <td>an alphanumeric (plus other common characters) id, for your own accounting purposes (e.g. useful if you have subaccounts that you send messages on behalf of, or even if you have your own unique id that you want to associate with the message). Max 20 characters. Reply messages that are pushed to you will include this parameter, based on the original message that they are in reply to.</td>
    </tr>
    <tr>
      <td>repliable</td>
      <td style="text-align: center"> </td>
      <td> </td>
      <td>1 to enable, 0 to disable, default is not set, which means that your User Profile’s default repliable setting will prevail. Also see discussion on repliability below.</td>
    </tr>
    <tr>
      <td>stop_dup_id</td>
      <td style="text-align: center"> </td>
      <td> </td>
      <td>see section on eliminating duplicates below.</td>
    </tr>
    <tr>
      <td>send_time</td>
      <td style="text-align: center"> </td>
      <td> </td>
      <td>scheduled send time (see section on scheduling below), in format yyyy-mm-dd hh:mm:ss, relative to the time zone specified for your account.</td>
    </tr>
    <tr>
      <td>send_time_unixtime</td>
      <td style="text-align: center"> </td>
      <td> </td>
      <td>scheduled send time in integer format. This is an alternative to send_time, and represents the number of seconds since 1 Jan 1970 UTC (GMT+0), also known as unixtime.</td>
    </tr>
    <tr>
      <td>send_time_seconds</td>
      <td style="text-align: center"> </td>
      <td> </td>
      <td>a flawed version of send_time_unixtime, provided only for backwards compatibility to clients already using it.</td>
    </tr>
    <tr>
      <td>scheduling_description</td>
      <td style="text-align: center"> </td>
      <td> </td>
      <td>if using scheduling, you could provide a description of the scheduled job here to later help identify it.</td>
    </tr>
    <tr>
      <td>test_always_succeed</td>
      <td style="text-align: center"> </td>
      <td>0</td>
      <td>for testing purposes - if set to 1, does basic validation (username, password, etc) of your submission, but stops short of actually submitting the messages, and returns a successful status code as if it had submitted them successfully.</td>
    </tr>
    <tr>
      <td>test_always_fail</td>
      <td style="text-align: center"> </td>
      <td>0</td>
      <td>as for test_always_succeed, but after basic validation, always returns a failure code.</td>
    </tr>
  </tbody>
</table>

<p>Any of the above parameters which relate to message settings (e.g. routing_group or sender) will, if specified, form a default for the whole batch, which can be overridden on a message-by-message basis by the optional CSV columns specified later in this document (although not all parameters can be overridden).</p>

<h2 id="csv-columns">CSV columns</h2>

<table>
  <thead>
    <tr>
      <th>column</th>
      <th style="text-align: center">required</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>msisdn</td>
      <td style="text-align: center">✓</td>
      <td>the recipient mobile number</td>
    </tr>
    <tr>
      <td>message</td>
      <td style="text-align: center">✓</td>
      <td>the message body</td>
    </tr>
    <tr>
      <td>sender</td>
      <td style="text-align: center"> </td>
      <td> </td>
    </tr>
    <tr>
      <td>msg_class</td>
      <td style="text-align: center"> </td>
      <td> </td>
    </tr>
    <tr>
      <td>dca</td>
      <td style="text-align: center"> </td>
      <td> </td>
    </tr>
    <tr>
      <td>routing_group</td>
      <td style="text-align: center"> </td>
      <td> </td>
    </tr>
    <tr>
      <td>source_id</td>
      <td style="text-align: center"> </td>
      <td> </td>
    </tr>
    <tr>
      <td>repliable</td>
      <td style="text-align: center"> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h2 id="returns">Returns:</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>status_code|status_description|batch_id
</code></pre></div></div>

<p>(where batch_id is optional, depending on the error)</p>

<p>Possible values for status_code are:</p>

<table>
  <thead>
    <tr>
      <th>status_code</th>
      <th>description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>In progress (a normal message submission, with no error encountered so far).</td>
    </tr>
    <tr>
      <td>1</td>
      <td>Scheduled (see Scheduling below).</td>
    </tr>
    <tr>
      <td>22</td>
      <td>Internal fatal error</td>
    </tr>
    <tr>
      <td>23</td>
      <td>Authentication failure</td>
    </tr>
    <tr>
      <td>24</td>
      <td>Data validation failed</td>
    </tr>
    <tr>
      <td>25</td>
      <td>You do not have sufficient credits</td>
    </tr>
    <tr>
      <td>26</td>
      <td>Upstream credits not available</td>
    </tr>
    <tr>
      <td>27</td>
      <td>You have exceeded your daily quota</td>
    </tr>
    <tr>
      <td>28</td>
      <td>Upstream quota exceeded</td>
    </tr>
    <tr>
      <td>40</td>
      <td>Temporarily unavailable</td>
    </tr>
    <tr>
      <td>201</td>
      <td>Maximum batch size exceeded (current maximum size: 30,000 messages)</td>
    </tr>
  </tbody>
</table>

<p>You should never depend on the value of status_description - only depend on status_code, which is a constant. However, status_description can contain useful information about the nature of failures when you are developing your initial application. batch_id is guaranteed to be a positive integer &gt; 0, if present.</p>

<p>Note: you should attempt to resend if you receive status code 40. You could also do so if you receive 26 or 28, which might have been resolved after several resend attempts. All other errors should be considered fatal.</p>

<p>Any <strong>HTTP status code</strong> other than 200 should be considered transient, i.e. you should attempt to resend after some interval.</p>

<h2 id="validation">Validation</h2>

<p>By default this API, unlike others we offer, tries to parse as much valid data as it can from your submission. Invalid lines that you submit should be ignored; invalid values for fields will be ignored or corrected (e.g. by truncating values that are too long) as far as possible.</p>

<h2 id="repliability">Repliability</h2>

<p>Repliability is a feature whereby the originating address (sender id) of a message is set to a number at which we will collect replies on your behalf, and make them available to you. The feature of repliability will not necessarily be possible on your account or for your destination(s). Also be aware that we may not have reply numbers available for your specific country, which means that persons who reply may be exposed to higher costs than those of sending SMSs in their own country, and poorer delivery speed may also result. The repliable parameter is incompatible with the sender parameter. Additionally, this parameter will override any default sender id which you may have set up on your account.</p>

<h2 id="scheduling">Scheduling</h2>

<p>Scheduling allows you to specify that a message be sent at a future date. Credits will be deducted immediately from your account, and once submitted, such a message cannot be cancelled. Messages can be scheduled a maximum of <strong>two years</strong> in advance.</p>

<p>If you specify a date/time in the past, your message will be sent immediately, and a status code of 0 will be returned. If you correctly specify a future date for sending, you will receive a status code of 1. Thereafter, you will not be able to request the status of a scheduled message until after it has actually been sent. The date that you supply must be in the time zone that your account is configured for.</p>

<p>If the destination is a group, the group members will be determined at the time that you submit the message, and not at the time the message is scheduled to be sent.</p>

<p>Please be sure to check our Terms and Conditions for any special conditions that may apply to scheduled messaging, e.g. adjustments that may need to be made for significant price changes where messages are scheduled far into the future.</p>

<h2 id="eliminating-duplicates">Eliminating duplicates</h2>

<p>Consider the case where you submit a message, but experience a network timeout (or your application crashes). Your application cannot know if we received and processed the message or not, and you are forced to resubmit it, possibly generating duplicates. If the message was to many recipients, this can be serious.
By submitting a unique id of your own along with every message that you submit, you can safeguard against this. The optional parameter stop_dup_id takes an integer as an argument, in the range 1 to 2147483647. If you submit a message with a stop_dup_id that you have recently (within the past few hours) used in another submission, then that submission will not be processed, and you will receive the response to the original submission, e.g.:
0|IN_PROGRESS|30430
(where 30430 is the batch_id that was generated by the original submission)</p>

<p>In other words, the process is entirely transparent to you, and you will never know whether your submission was processed during the first or the second attempt. Failure statuses are not recorded, so resubmitting a message which <strong>failed</strong> on its first submission will never result in you receiving a cached result.</p>

<p>stop_dup_id’s are shared across send_sms and send_batch, so be sure not use the same id when using both API calls.</p>

<h2 id="route-specific-features">Route-specific features</h2>

<p>Some features depend on how messages are routes, which again depends on certail pricing options which may have been applied to your account. Please <a href="../../../../contact/index.html">contact us</a> to find if such feature is available to you, if unsure.</p>

    </div>
    <div class="col-md-2">
        <div class="btn-group-vertical">
            <a class="btn btn-default" href="../../index.html">Quick Start</a>
            <a class="btn btn-default" href="../../overview.html">Overview</a>
            <a class="btn btn-default" href="../index.html">Submission</a>
            <a class="btn btn-default" href="../../reception/index.html">Reception</a>
            <a class="btn btn-default" href="../../status_reports/index.html">Status Reports</a>
            <a class="btn btn-default" href="../../phonebook/index.html">Phonebook</a>

            <a class="btn btn-default" href="../../account/index.html">Account</a>
        </div>
    </div>
  </div>
</div>


    </div>

    <script src="../../../js/jquery-1.11.0.min.js"></script>
    <script src="../../../js/bootstrap-3.1.1.min.js"></script>
    <script src="../../../js/highlight-8.4.min.js"></script>
    <script src="../../../js/fardt-0.4.2.min.js"></script>

    <script >
    $(function () {
        $('[data-toggle="tooltip"]').tooltip();
        $('[data-toggle="popover"]').popover();
    })
    </script>

    <script src="../../../js/scripts.js"></script>
    
    <!-- Google Analytics -->
    <script>
    var gacode = (("www.bulksms.com" == document.location.hostname) ? "UA-540842-13" : "UA-540842-12");

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','../../../../../www.google-analytics.com/analytics.js','ga');
    ga('create', gacode, 'auto');
    ga('send', 'pageview');
    </script>
    <!-- End Google Analytics -->

</body>

<!-- Mirrored from www.bulksms.com/developer/eapi/submission/send_batch/ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 15 Oct 2019 07:43:21 GMT -->
</html>
